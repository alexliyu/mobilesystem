<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Strict//EN'
'http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd'>
<html><head>
<title>mobile.mobile.guardian.shortcuts</title>
<style>
body {
    background:white;
    margin: 0em 1em 10em 1em;
    color: black;
}

h1 { color: white; background: #4FA4FF; }
h2 { color: white; background: #4FA4FF; }
h3 { color: white; background: #00557F; }
h4 { color: white; background: #00557F; }
    
a { color: #AA5500; }

</style>
</head>
<body><a NAME="top" ID="top"></a>
<h1>mobile.mobile.guardian.shortcuts</h1>

<h3>Global Attributes</h3>
<table>
<tr><td>None</td></tr>
</table>
<h3>Classes</h3>
<table>
<tr><td>None</td></tr>
</table>
<h3>Functions</h3>
<table>
<tr>
<td><a href="#assign">assign</a></td>
<td>Assigns permission to user/group and object pair.</td>
</tr><tr>
<td><a href="#get_groups_with_perms">get_groups_with_perms</a></td>
<td>Returns queryset of all ``Group`` objects with *any* object permissions for the given ``obj``.</td>
</tr><tr>
<td><a href="#get_objects_for_user">get_objects_for_user</a></td>
<td>Returns queryset of objects for which given ``user`` has *all* permissions present at ``perms``.</td>
</tr><tr>
<td><a href="#get_perms">get_perms</a></td>
<td>Returns permissions for given user/group and object pair, as list of strings.</td>
</tr><tr>
<td><a href="#get_perms_for_model">get_perms_for_model</a></td>
<td>Returns queryset of all Permission objects for the given class.</td>
</tr><tr>
<td><a href="#get_users_with_perms">get_users_with_perms</a></td>
<td>Returns queryset of all ``User`` objects with *any* object permissions for the given ``obj``.</td>
</tr><tr>
<td><a href="#remove_perm">remove_perm</a></td>
<td>Removes permission from user/group and object pair.</td>
</tr>
</table>
<hr /><hr />
<a NAME="assign" ID="assign"></a>
<h2>assign</h2>
<b>assign</b>(<i>perm, user_or_group, obj=None</i>)
<p>
    Assigns permission to user/group and object pair.
</p><p>
    :param perm: proper permission for given ``obj``, as string (in format:
      ``app_label.codename`` or ``codename``). If ``obj`` is not given, must
      be in format ``app_label.codename``.
</p><p>
    :param user_or_group: instance of ``User``, ``AnonymousUser`` or ``Group``;
      passing any other object would raise
      ``guardian.exceptions.NotUserNorGroup`` exception
</p><p>
    :param obj: persisted Django's ``Model`` instance or ``None`` if assigning
      global permission. Default is ``None``.
</p><p>
    We can assign permission for ``Model`` instance for specific user:
</p><p>
    >>> from django.contrib.sites.models import Site
    >>> from django.contrib.auth.models import User, Group
    >>> from guardian.shortcuts import assign
    >>> site = Site.objects.get_current()
    >>> user = User.objects.create(username='joe')
    >>> assign("change_site", user, site)
    <UserObjectPermission: example.com | joe | change_site>
    >>> user.has_perm("change_site", site)
    True
</p><p>
    ... or we can assign permission for group:
</p><p>
    >>> group = Group.objects.create(name='joe-group')
    >>> user.groups.add(group)
    >>> assign("delete_site", group, site)
    <GroupObjectPermission: example.com | joe-group | delete_site>
    >>> user.has_perm("delete_site", site)
    True
</p><p>
    **Global permissions**
</p><p>
    This function may also be used to assign standard, *global* permissions if
    ``obj`` parameter is omitted. Added Permission would be returned in that
    case:
</p><p>
    >>> assign("sites.change_site", user)
    <Permission: sites | site | Can change site>
</p><p>

</p>
<div align="right"><a href="#top">Up</a></div>
<hr /><hr />
<a NAME="get_groups_with_perms" ID="get_groups_with_perms"></a>
<h2>get_groups_with_perms</h2>
<b>get_groups_with_perms</b>(<i>obj, attach_perms=False</i>)
<p>
    Returns queryset of all ``Group`` objects with *any* object permissions for
    the given ``obj``.
</p><p>
    :param obj: persisted Django's ``Model`` instance
</p><p>
    :param attach_perms: Default: ``False``. If set to ``True`` result would be
      dictionary of ``Group`` instances with permissions' codenames list as
      values. This would fetch groups eagerly!
</p><p>
    Example::
</p><p>
        >>> from django.contrib.auth.models import Group
        >>> from django.contrib.flatpages.models import FlatPage
        >>> from guardian.shortcuts import assign, get_groups_with_perms
        >>>
        >>> page = FlatPage.objects.create(title='Some page', path='/some/page/')
        >>> admins = Group.objects.create(name='Admins')
        >>> assign('change_flatpage', group, page)
        >>>
        >>> get_groups_with_perms(page)
        [<Group: admins>]
        >>>
        >>> get_groups_with_perms(page, attach_perms=True)
        {<Group: admins>: [u'change_flatpage']}
</p><p>

</p>
<div align="right"><a href="#top">Up</a></div>
<hr /><hr />
<a NAME="get_objects_for_user" ID="get_objects_for_user"></a>
<h2>get_objects_for_user</h2>
<b>get_objects_for_user</b>(<i>user, perms, klass=None, use_groups=True</i>)
<p>
    Returns queryset of objects for which given ``user`` has *all*
    permissions present at ``perms``.
</p><p>
    :param user: ``User`` instance for which objects would be returned
    :param perms: sequence with permissions as strings which should be checked.
      If ``klass`` parameter is not given, those should be full permission
      names rather than only codenames (i.e. ``auth.change_user``). If more than
      one permission is present within sequence, theirs content type **must** be
      the same or ``MixedContentTypeError`` exception would be raised. For
      convenience, may be given as single permission (string).
    :param klass: may be a Model, Manager or QuerySet object. If not given
      this parameter would be computed based on given ``params``.
    :param use_groups: if ``False``, wouldn't check user's groups object
      permissions. Default is ``True``.
</p><p>
    :raises MixedContentTypeError: when computed content type for ``perms``
      and/or ``klass`` clashes.
    :raises WrongAppError: if cannot compute app label for given ``perms``/
      ``klass``.
</p><p>
    Example::
</p><p>
        >>> from guardian.shortcuts import get_objects_for_user
        >>> joe = User.objects.get(username='joe')
        >>> get_objects_for_user(joe, ['auth.change_group'])
        []
        >>> from guardian.shortcuts import assign
        >>> group = Group.objects.create('some group')
        >>> assign('auth.change_group', joe, group)
        >>> get_objects_for_user(joe, ['auth.change_group'])
        [<Group some group>]
</p><p>

</p>
<div align="right"><a href="#top">Up</a></div>
<hr /><hr />
<a NAME="get_perms" ID="get_perms"></a>
<h2>get_perms</h2>
<b>get_perms</b>(<i>user_or_group, obj</i>)
<p>
    Returns permissions for given user/group and object pair, as list of
    strings.
</p>
<div align="right"><a href="#top">Up</a></div>
<hr /><hr />
<a NAME="get_perms_for_model" ID="get_perms_for_model"></a>
<h2>get_perms_for_model</h2>
<b>get_perms_for_model</b>(<i>cls</i>)
<p>
    Returns queryset of all Permission objects for the given class. It is
    possible to pass Model as class or instance.
</p>
<div align="right"><a href="#top">Up</a></div>
<hr /><hr />
<a NAME="get_users_with_perms" ID="get_users_with_perms"></a>
<h2>get_users_with_perms</h2>
<b>get_users_with_perms</b>(<i>obj, attach_perms=False, with_superusers=False, with_group_users=True</i>)
<p>
    Returns queryset of all ``User`` objects with *any* object permissions for
    the given ``obj``.
</p><p>
    :param obj: persisted Django's ``Model`` instance
</p><p>
    :param attach_perms: Default: ``False``. If set to ``True`` result would be
      dictionary of ``User`` instances with permissions' codenames list as
      values. This would fetch users eagerly!
</p><p>
    :param with_superusers: Default: ``False``. If set to ``True`` result would
      contain all superusers.
</p><p>
    :param with_group_users: Default: ``True``. If set to ``False`` result would
      **not** contain those users who have only group permissions for given
      ``obj``.
</p><p>
    Example::
</p><p>
        >>> from django.contrib.auth.models import User
        >>> from django.contrib.flatpages.models import FlatPage
        >>> from guardian.shortcuts import assign, get_users_with_perms
        >>>
        >>> page = FlatPage.objects.create(title='Some page', path='/some/page/')
        >>> joe = User.objects.create_user('joe', 'joe@example.com', 'joesecret')
        >>> assign('change_flatpage', joe, page)
        >>>
        >>> get_users_with_perms(page)
        [<User: joe>]
        >>>
        >>> get_users_with_perms(page, attach_perms=True)
        {<User: joe>: [u'change_flatpage']}
</p><p>

</p>
<div align="right"><a href="#top">Up</a></div>
<hr /><hr />
<a NAME="remove_perm" ID="remove_perm"></a>
<h2>remove_perm</h2>
<b>remove_perm</b>(<i>perm, user_or_group=None, obj=None</i>)
<p>
    Removes permission from user/group and object pair.
</p><p>
    :param perm: proper permission for given ``obj``, as string (in format:
      ``app_label.codename`` or ``codename``). If ``obj`` is not given, must
      be in format ``app_label.codename``.
</p><p>
    :param user_or_group: instance of ``User``, ``AnonymousUser`` or ``Group``;
      passing any other object would raise
      ``guardian.exceptions.NotUserNorGroup`` exception
</p><p>
    :param obj: persisted Django's ``Model`` instance or ``None`` if assigning
      global permission. Default is ``None``.
</p><p>

</p>
<div align="right"><a href="#top">Up</a></div>
<hr />
</body></html>